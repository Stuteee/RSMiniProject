<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Recommender System</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', sans-serif;
        line-height: 1.6;
        background: linear-gradient(135deg, #bcd8c1 0%, #9fc7a5 100%);
        color: #013b2e;
        margin: 0;
        padding: 0;
    }

    .text-white {
        font-family: 'Poppins', sans-serif;
        font-size: 16px;
        font-weight: 500;
        margin: 12px 0;
    }

    .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        transition: transform 0.2s ease;
        padding: 0;
        height: auto;
       display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .card:hover {
        transform: translateY(-5px);
    }

    .card-img-top {
        width: 100%;
        height: 180px;
        object-fit: cover;
        display:block;
    }

    /* grid for index cards to avoid uneven gaps */
    .results-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:24px;align-items:start;max-width:1200px;margin:0 auto}
    .results-grid > .rec-card{height:100%}
    .rec-card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);overflow:hidden;display:flex;flex-direction:column}
    .rec-card .book-info{padding:12px}
    .img-placeholder{height:180px;background:linear-gradient(180deg,#f6f6f6,#ededed);display:flex;align-items:center;justify-content:center;color:#9aa;font-size:14px}

    img.card-img-top{border-top-left-radius:12px;border-top-right-radius:12px}

    .img-placeholder{height:180px;background:linear-gradient(180deg,#f6f6f6,#ededed);display:flex;align-items:center;justify-content:center;color:#9aa;font-size:14px}

    h1.text-white {
        font-size: 3.5rem;
        font-weight: 700;
        margin-bottom: 40px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .container {
        padding: 40px 20px;
    }

    .rate-link {
        display: inline-block;
        padding: 6px 12px;
        background-color: #222e50;
        color: #47c7e0;
        text-decoration: none;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        transition: background-color 0.2s ease;
    }

    .rate-link:hover {
        background-color: #1a2339;
        color: #47c7e0;
        text-decoration: none;
    }

    .rec-card .book-actions {
        padding: 0 12px 12px 12px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }
</style>
<body>

    <nav class="navbar" style="background: #222e50; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div class="container" style="display: flex; align-items: center;">
            <a class="navbar-brand" style="color: #47c7e0; font-family: 'Poppins', sans-serif; font-size: 5rem; letter-spacing: 1px; font-weight: 700;">Book Recs</a>
            <ul class="nav navbar-nav" style="margin-left: 20px; margin-bottom: 0;">
                <li><a href="/" style="color: #47c7e0; font-size: 20px; font-weight: 500; transition: color 0.3s ease;">Home</a></li>
                <li><a href="/recommend_ui" style="color: #47c7e0; font-size: 20px; font-weight: 500; transition: color 0.3s ease;">Recommend</a></li>
                <li><a href="/contact" style="color: #47c7e0; font-size: 20px; font-weight: 500; transition: color 0.3s ease;">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <h1 class="text-white" style="color: #1c715d; margin-bottom: 50px;">Some Famous Books...</h1>
            </div>
            <div class="col-md-8 col-md-offset-2" style="margin-bottom: 30px;">
                <div class="card" style="padding: 25px; height: auto;">
                    <div style="text-align: left; margin-bottom: 10px;">
                        <h2 style="margin-bottom: 8px; color: #1c715d;">Find recommendations</h2>
                        <p style="color: #013b2e;">Enter a book title and we'll show hybrid recommendations (content + collaborative + popularity).</p>
                    </div>
                    <form method="get" action="/" style="display:flex; gap:10px; align-items:center; width:100%;">
                        <input id="searchTitle" name="q" value="{{ query if query is defined else '' }}" class="form-control" placeholder="Type a book title e.g. The Da Vinci Code" style="height:48px; border-radius:8px; border:1px solid #cfe6d6; padding:12px; flex:1;">
                        <button type="submit" class="btn btn-lg" style="background-color: #222e50; color: #47c7e0; border: none; padding: 12px 20px; border-radius: 8px;">Search</button>
                    </form>
                    {% if msg is defined %}
                        <div style="margin-top:8px; color:#7a2d2d;">{{ msg }}</div>
                    {% endif %}
                    <small style="display:block; margin-top:8px; color:#0e4b3b;">Tip: You can refine results on the results page by adjusting component weights.</small>
                </div>
            </div>

            <div class="col-md-12">
                <div class="results-grid">
                {% for i in range(book_name|length) %}
                    <div class="rec-card">
                        {% if image[i] %}
                            <img class="card-img-top" src="{{ image[i] }}" alt="{{ book_name[i] }}" onerror="this.style.display='none'">
                        {% else %}
                            <div class="img-placeholder">No cover available</div>
                        {% endif %}
                        <div class="book-info">
                            <p class="text-white book-title" style="font-size: 16px; font-weight: 600; margin-bottom: 8px; color: #013b2e;">{{ book_name[i] }}</p>
                            <h4 class="text-white author" style="font-size: 14px; color: #1c715d; margin-bottom: 10px;">{{ author[i] }}</h4>
                            <div class="stats" style="display: flex; justify-content: space-between; font-size: 13px; color: #666;">
                                <span class="votes">Votes: {{ votes[i] }}</span>
                                <span class="rating" style="font-weight: 600; color: #1c715d;">Rating: {{ '%.1f' % rating[i] }}</span>
                            </div>
                        </div>
                        <div class="book-actions">
                            {% if book_ids and book_ids[i] %}
                                <a href="/rate/{{ book_ids[i] }}" class="rate-link">Rate this book</a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
                </div>
            </div>


        </div>
    </div>

</body>
</html>